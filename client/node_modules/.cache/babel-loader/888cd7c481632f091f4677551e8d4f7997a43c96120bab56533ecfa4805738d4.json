{"ast":null,"code":"import React,{useContext,useState}from'react';import{useNavigate}from'react-router-dom';import AppContext from'../AppContext';import SignupForm from'../Components/SignupForm';import'../Styling/App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Signup(){const navigate=useNavigate();const{handleLogin,API_URL}=useContext(AppContext);const[errorState,setErrorState]=useState(false);const[errorMessage,seterrorMessage]=useState('');function handleSubmit(username,password,setSubmitting){fetch(\"\".concat(API_URL,\"api/signup\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password})}).then(r=>{if(r.ok){handleLogin(username,password,setSubmitting,navigate);return r.json();}else{return r.json().then(data=>{// Now data is the parsed JSON object\nconsole.log(data);console.log(data.error);setErrorState(true);seterrorMessage(data.error);setSubmitting(false);throw new Error(data.error||\"Signup failed\");});}}).catch(err=>{console.error(err);setSubmitting(false);});}return/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"login_wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"background_wrapper\",id:\"login\",children:/*#__PURE__*/_jsx(\"div\",{className:\"_wrapper\",id:\"login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login_content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login_header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Signup\"}),/*#__PURE__*/_jsx(\"p\",{children:errorState?/*#__PURE__*/_jsx(\"p\",{children:errorMessage}):null})]}),/*#__PURE__*/_jsx(SignupForm,{handleSubmit:handleSubmit})]})})})})});}export default Signup;","map":{"version":3,"names":["React","useContext","useState","useNavigate","AppContext","SignupForm","jsx","_jsx","jsxs","_jsxs","Signup","navigate","handleLogin","API_URL","errorState","setErrorState","errorMessage","seterrorMessage","handleSubmit","username","password","setSubmitting","fetch","concat","method","headers","body","JSON","stringify","then","r","ok","json","data","console","log","error","Error","catch","err","children","className","id"],"sources":["/home/jacob/development/code/phase-5/p5-project/client/src/Pages/Signup.js"],"sourcesContent":["import React, {useContext, useState} from 'react'\nimport { useNavigate } from 'react-router-dom';\nimport AppContext from '../AppContext';\nimport SignupForm from '../Components/SignupForm';\nimport '../Styling/App.css'\n\n\n\n\nfunction Signup() {\n    const navigate = useNavigate();\n    const { handleLogin, API_URL } = useContext(AppContext);\n    const [errorState, setErrorState] = useState(false)\n    const [errorMessage, seterrorMessage] = useState('')\n    \n    function handleSubmit(username, password, setSubmitting) {\n      fetch(`${API_URL}api/signup`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ username, password }),\n      })\n        .then((r) => {\n          if (r.ok) {\n\n            handleLogin(username, password, setSubmitting, navigate);\n            return r.json()\n          } else {\n            return r.json().then((data) => {\n              // Now data is the parsed JSON object\n              console.log(data);\n              console.log(data.error);\n              setErrorState(true);\n              seterrorMessage(data.error)\n              setSubmitting(false);\n              throw new Error(data.error || \"Signup failed\");\n            });\n          }\n        })\n        .catch((err) => {\n          console.error(err);\n          setSubmitting(false);\n        });\n\n  }\n  return (\n    <main>\n        <div className='login_wrapper'>\n          <div className='background_wrapper' id='login'>\n            <div className='_wrapper' id='login'>\n              <div className='login_content'>\n                <div className='login_header'><h2>Signup</h2>\n                  <p>{errorState?\n                    <p>{errorMessage}</p>\n                  :null}\n                  </p>\n                </div>\n                <SignupForm handleSubmit={handleSubmit}/>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n    \n    </main>\n  )\n}\n\nexport default Signup"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,UAAU,CAAEC,QAAQ,KAAO,OAAO,CACjD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,UAAU,KAAM,eAAe,CACtC,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,MAAO,oBAAoB,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAK3B,QAAS,CAAAC,MAAMA,CAAA,CAAG,CACd,KAAM,CAAAC,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAES,WAAW,CAAEC,OAAQ,CAAC,CAAGZ,UAAU,CAACG,UAAU,CAAC,CACvD,KAAM,CAACU,UAAU,CAAEC,aAAa,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACc,YAAY,CAAEC,eAAe,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAEpD,QAAS,CAAAgB,YAAYA,CAACC,QAAQ,CAAEC,QAAQ,CAAEC,aAAa,CAAE,CACvDC,KAAK,IAAAC,MAAA,CAAIV,OAAO,eAAc,CAC5BW,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAET,QAAQ,CAAEC,QAAS,CAAC,CAC7C,CAAC,CAAC,CACCS,IAAI,CAAEC,CAAC,EAAK,CACX,GAAIA,CAAC,CAACC,EAAE,CAAE,CAERnB,WAAW,CAACO,QAAQ,CAAEC,QAAQ,CAAEC,aAAa,CAAEV,QAAQ,CAAC,CACxD,MAAO,CAAAmB,CAAC,CAACE,IAAI,CAAC,CAAC,CACjB,CAAC,IAAM,CACL,MAAO,CAAAF,CAAC,CAACE,IAAI,CAAC,CAAC,CAACH,IAAI,CAAEI,IAAI,EAAK,CAC7B;AACAC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC,CACjBC,OAAO,CAACC,GAAG,CAACF,IAAI,CAACG,KAAK,CAAC,CACvBrB,aAAa,CAAC,IAAI,CAAC,CACnBE,eAAe,CAACgB,IAAI,CAACG,KAAK,CAAC,CAC3Bf,aAAa,CAAC,KAAK,CAAC,CACpB,KAAM,IAAI,CAAAgB,KAAK,CAACJ,IAAI,CAACG,KAAK,EAAI,eAAe,CAAC,CAChD,CAAC,CAAC,CACJ,CACF,CAAC,CAAC,CACDE,KAAK,CAAEC,GAAG,EAAK,CACdL,OAAO,CAACE,KAAK,CAACG,GAAG,CAAC,CAClBlB,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,CAAC,CAER,CACA,mBACEd,IAAA,SAAAiC,QAAA,cACIjC,IAAA,QAAKkC,SAAS,CAAC,eAAe,CAAAD,QAAA,cAC5BjC,IAAA,QAAKkC,SAAS,CAAC,oBAAoB,CAACC,EAAE,CAAC,OAAO,CAAAF,QAAA,cAC5CjC,IAAA,QAAKkC,SAAS,CAAC,UAAU,CAACC,EAAE,CAAC,OAAO,CAAAF,QAAA,cAClC/B,KAAA,QAAKgC,SAAS,CAAC,eAAe,CAAAD,QAAA,eAC5B/B,KAAA,QAAKgC,SAAS,CAAC,cAAc,CAAAD,QAAA,eAACjC,IAAA,OAAAiC,QAAA,CAAI,QAAM,CAAI,CAAC,cAC3CjC,IAAA,MAAAiC,QAAA,CAAI1B,UAAU,cACZP,IAAA,MAAAiC,QAAA,CAAIxB,YAAY,CAAI,CAAC,CACtB,IAAI,CACF,CAAC,EACD,CAAC,cACNT,IAAA,CAACF,UAAU,EAACa,YAAY,CAAEA,YAAa,CAAC,CAAC,EACtC,CAAC,CACH,CAAC,CACH,CAAC,CACH,CAAC,CAGJ,CAAC,CAEX,CAEA,cAAe,CAAAR,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}