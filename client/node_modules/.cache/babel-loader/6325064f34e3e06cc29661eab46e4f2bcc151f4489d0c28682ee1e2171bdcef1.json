{"ast":null,"code":"import React,{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";function EditableText(_ref){let{initialText,transactionId,keyName}=_ref;const[isEditing,setIsEditing]=useState(false);// Track if editing mode is active\nconst[text,setText]=useState(initialText);// Store the text value\nconst[loading,setLoading]=useState(false);// Track loading state\nconst[error,setError]=useState(null);// Track error state\nconst handleTextClick=()=>{setIsEditing(true);// Switch to editing mode\n};const handleInputChange=e=>{setText(e.target.value);// Update the text state as the user types\n};const handleInputBlur=async()=>{setIsEditing(false);// Exit editing mode when the input loses focus\nawait saveTextToDatabase();};const handleKeyPress=async e=>{if(e.key===\"Enter\"){setIsEditing(false);// Exit editing mode when Enter is pressed\nawait saveTextToDatabase();}};const saveTextToDatabase=async()=>{setLoading(true);setError(null);const response=await fetch(\"/api/transaction/\".concat(transactionId),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({[keyName]:Date.parse(text)})}).then(r=>{if(!r.ok){r.json().then(data=>{console.log(data.error);return data.error;});}else{r.json().then(data=>{console.log(\"Changes saved:\",data);return data;});}});};return/*#__PURE__*/_jsx(\"div\",{children:isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:text,onChange:handleInputChange,onBlur:handleInputBlur,onKeyPress:handleKeyPress,autoFocus:true}):/*#__PURE__*/_jsx(\"span\",{onClick:handleTextClick,style:{cursor:\"pointer\"},children:text})});}export default EditableText;","map":{"version":3,"names":["React","useState","jsx","_jsx","EditableText","_ref","initialText","transactionId","keyName","isEditing","setIsEditing","text","setText","loading","setLoading","error","setError","handleTextClick","handleInputChange","e","target","value","handleInputBlur","saveTextToDatabase","handleKeyPress","key","response","fetch","concat","method","headers","body","JSON","stringify","Date","parse","then","r","ok","json","data","console","log","children","type","onChange","onBlur","onKeyPress","autoFocus","onClick","style","cursor"],"sources":["/home/jacob/development/code/phase-5/p5-project/client/src/Components/EditableText.js"],"sourcesContent":["import React, { useState } from \"react\";\n\nfunction EditableText({ initialText, transactionId, keyName}) {\n    const [isEditing, setIsEditing] = useState(false); // Track if editing mode is active\n    const [text, setText] = useState(initialText); // Store the text value\n    const [loading, setLoading] = useState(false); // Track loading state\n    const [error, setError] = useState(null); // Track error state\n\n  const handleTextClick = () => {\n    setIsEditing(true); // Switch to editing mode\n  };\n\n  const handleInputChange = (e) => {\n    setText(e.target.value); // Update the text state as the user types\n  };\n\n  const handleInputBlur = async () => {\n    setIsEditing(false); // Exit editing mode when the input loses focus\n    await saveTextToDatabase();\n  };\n\n  const handleKeyPress = async (e) => {\n    if (e.key === \"Enter\") {\n      setIsEditing(false); // Exit editing mode when Enter is pressed\n      await saveTextToDatabase();\n    }\n  };\n\n  const saveTextToDatabase = async () => {\n    setLoading(true);\n    setError(null);\n\n   \n      const response = await fetch(`/api/transaction/${transactionId}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ [keyName]: Date.parse(text) }),\n      })\n      .then((r) => {\n      if (!r.ok) {\n        r.json()\n        .then((data)=>{\n          console.log(data.error)\n          return data.error\n        })\n        \n      }\n\n      else{\n        r.json()\n        .then((data)=>{\n          console.log(\"Changes saved:\", data);\n        return data\n      })\n      }\n    \n    })\n      \n  };\n\n  return (\n    <div>\n      {isEditing ? (\n        <input\n          type=\"text\"\n          value={text}\n          onChange={handleInputChange}\n          onBlur={handleInputBlur}\n          onKeyPress={handleKeyPress}\n          autoFocus\n        />\n      ) : (\n        <span onClick={handleTextClick} style={{ cursor: \"pointer\" }}>\n          {text}\n        </span>\n      )}\n    </div>\n  );\n}\n\nexport default EditableText;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}