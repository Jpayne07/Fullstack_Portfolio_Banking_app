{"ast":null,"code":"import React,{useState,useContext}from'react';import{useParams,Link}from'react-router-dom';import AppContext from'../AppContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TransactionIndexModule(_ref){let{}=_ref;const{transactions,handleTransactionDelete}=useContext(AppContext);const{id}=useParams();const[currentPage,setCurrentPage]=useState(1);// Tracks the current page\nconst itemsPerPage=10;// Number of transactions per page\nconst uniqueDateSet=new Set();const handleNextPage=()=>{setCurrentPage(prev=>prev+1);};const handlePreviousPage=()=>{if(currentPage>1){setCurrentPage(prev=>prev-1);}};// handle transaction delete\n// map transactions\nconst filteredTransactions=transactions.filter(transaction=>parseInt(transaction.account_id)===parseInt(id));const finalTransactions=filteredTransactions.slice((currentPage-1)*itemsPerPage,currentPage*itemsPerPage).map(transaction=>{// date below\nconst date=new Date(transaction.created_at).toLocaleDateString('en-US',{day:'2-digit',month:'2-digit',year:'numeric'});uniqueDateSet.add(date);return/*#__PURE__*/_jsxs(\"div\",{className:\"transaction_rows\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"transaction_name\",children:transaction.title}),/*#__PURE__*/_jsx(\"p\",{children:date}),/*#__PURE__*/_jsx(\"p\",{id:\"transaction_header_hide\",children:transaction.id}),/*#__PURE__*/_jsx(\"p\",{id:\"transaction_value_hide\",children:transaction.card?transaction.card.card_number.toString().slice(-4):null}),/*#__PURE__*/_jsxs(\"p\",{id:\"Price\",children:[/*#__PURE__*/_jsx(\"span\",{id:\"DollaBill\",children:\"$ \"}),transaction.transaction_type===\"Negative\"?\"-\".concat(transaction.amount):transaction.amount]}),/*#__PURE__*/_jsxs(\"div\",{id:\"transaction_value_hide\",children:[/*#__PURE__*/_jsx(Link,{to:\"/transactions/\".concat(transaction.id),children:/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 78 78\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M39 65H68.25M53.625 11.375C54.9179 10.0821 56.6715 9.35571 58.5 9.35571C59.4054 9.35571 60.3019 9.53404 61.1383 9.88051C61.9748 10.227 62.7348 10.7348 63.375 11.375C64.0152 12.0152 64.523 12.7752 64.8695 13.6117C65.216 14.4481 65.3943 15.3446 65.3943 16.25C65.3943 17.1554 65.216 18.0519 64.8695 18.8883C64.523 19.7248 64.0152 20.4848 63.375 21.125L22.75 61.75L9.75 65L13 52L53.625 11.375Z\",stroke:\"#2BFF5C\",strokeWidth:\"4\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})})}),/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 92 92\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",onClick:()=>handleTransactionDelete(transaction.id,id),children:/*#__PURE__*/_jsx(\"path\",{d:\"M11.5 23H19.1667M19.1667 23H80.5M19.1667 23V76.6667C19.1667 78.7 19.9744 80.65 21.4122 82.0878C22.85 83.5256 24.8 84.3333 26.8333 84.3333H65.1667C67.2 84.3333 69.15 83.5256 70.5878 82.0878C72.0256 80.65 72.8333 78.7 72.8333 76.6667V23M30.6667 23V15.3333C30.6667 13.3 31.4744 11.35 32.9122 9.91219C34.35 8.47441 36.3 7.66667 38.3333 7.66667H53.6667C55.7 7.66667 57.65 8.47441 59.0878 9.91219C60.5256 11.35 61.3333 13.3 61.3333 15.3333V23M38.3333 42.1667V65.1667M53.6667 42.1667V65.1667\",stroke:\"#FF0000\",strokeWidth:\"4\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})})]})]},transaction.id);});{/* Pagination Controls */}return/*#__PURE__*/_jsxs(\"div\",{children:[finalTransactions,/*#__PURE__*/_jsxs(\"div\",{className:\"pagination_controls\",style:{marginTop:\"20px\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePreviousPage,disabled:currentPage===1,style:{width:\"4rem\"},children:\"\\u2190\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Page \",currentPage,\" of\",\" \",Math.ceil(filteredTransactions.length/itemsPerPage)]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNextPage,disabled:currentPage*itemsPerPage>=filteredTransactions.length,style:{width:\"4rem\"},children:\"\\u2192\"})]})]});}export default TransactionIndexModule;","map":{"version":3,"names":["React","useState","useContext","useParams","Link","AppContext","jsx","_jsx","jsxs","_jsxs","TransactionIndexModule","_ref","transactions","handleTransactionDelete","id","currentPage","setCurrentPage","itemsPerPage","uniqueDateSet","Set","handleNextPage","prev","handlePreviousPage","filteredTransactions","filter","transaction","parseInt","account_id","finalTransactions","slice","map","date","Date","created_at","toLocaleDateString","day","month","year","add","className","children","title","card","card_number","toString","transaction_type","concat","amount","to","width","height","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","onClick","style","marginTop","disabled","Math","ceil","length"],"sources":["/home/jacob/development/code/phase-5/p5-project/client/src/Components/Transaction_Index_Module.js"],"sourcesContent":["import React, {useState,useContext} from 'react'\nimport { useParams, Link } from 'react-router-dom';\nimport AppContext from '../AppContext';\n\n\nfunction TransactionIndexModule({}) {\n  const {transactions, handleTransactionDelete} = useContext(AppContext);\n  const { id } = useParams()\n  const [currentPage, setCurrentPage] = useState(1); // Tracks the current page\n  const itemsPerPage = 10; // Number of transactions per page\n  const uniqueDateSet = new Set();\n\n  const handleNextPage = () => {\n    setCurrentPage((prev) => prev + 1);\n  };\n\n  const handlePreviousPage = () => {\n    if (currentPage > 1) {\n      setCurrentPage((prev) => prev - 1);\n    }\n  };\n  // handle transaction delete\n\n  // map transactions\n \n  \n    const filteredTransactions =  transactions\n    .filter(transaction=> parseInt(transaction.account_id) === parseInt(id))\n\n    const finalTransactions = filteredTransactions\n    .slice(\n      (currentPage - 1) * itemsPerPage,\n      currentPage * itemsPerPage)\n    .map(transaction=>{\n        \n          // date below\n          const date = new Date(transaction.created_at).toLocaleDateString('en-US', {\n            day: '2-digit',\n            month: '2-digit',\n            year: 'numeric',\n          })\n          uniqueDateSet.add(date)\n      \n        return(\n          \n        <div className='transaction_rows' key={transaction.id}>\n          <p id='transaction_name'>{transaction.title}</p>\n          <p>{date}</p>\n          <p id=\"transaction_header_hide\">{transaction.id}</p>\n          <p id=\"transaction_value_hide\">{transaction.card?transaction.card.card_number.toString().slice(-4):null}</p>\n          <p id='Price'><span id='DollaBill'>$ </span>{transaction.transaction_type ===\"Negative\"?`-${transaction.amount}`:transaction.amount}</p>\n          <div id=\"transaction_value_hide\">\n            <Link to ={`/transactions/${transaction.id}`}>\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 78 78\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M39 65H68.25M53.625 11.375C54.9179 10.0821 56.6715 9.35571 58.5 9.35571C59.4054 9.35571 60.3019 9.53404 61.1383 9.88051C61.9748 10.227 62.7348 10.7348 63.375 11.375C64.0152 12.0152 64.523 12.7752 64.8695 13.6117C65.216 14.4481 65.3943 15.3446 65.3943 16.25C65.3943 17.1554 65.216 18.0519 64.8695 18.8883C64.523 19.7248 64.0152 20.4848 63.375 21.125L22.75 61.75L9.75 65L13 52L53.625 11.375Z\" stroke=\"#2BFF5C\" strokeWidth=\"4\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n              </svg>\n            </Link>\n            <svg width=\"20\"height=\"20\" viewBox=\"0 0 92 92\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" onClick={()=>handleTransactionDelete(transaction.id, id)}>\n              <path d=\"M11.5 23H19.1667M19.1667 23H80.5M19.1667 23V76.6667C19.1667 78.7 19.9744 80.65 21.4122 82.0878C22.85 83.5256 24.8 84.3333 26.8333 84.3333H65.1667C67.2 84.3333 69.15 83.5256 70.5878 82.0878C72.0256 80.65 72.8333 78.7 72.8333 76.6667V23M30.6667 23V15.3333C30.6667 13.3 31.4744 11.35 32.9122 9.91219C34.35 8.47441 36.3 7.66667 38.3333 7.66667H53.6667C55.7 7.66667 57.65 8.47441 59.0878 9.91219C60.5256 11.35 61.3333 13.3 61.3333 15.3333V23M38.3333 42.1667V65.1667M53.6667 42.1667V65.1667\" stroke=\"#FF0000\" strokeWidth=\"4\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n            </svg>\n          </div>\n        </div>\n        )})\n          {/* Pagination Controls */}\n  return(\n    \n    <div>{finalTransactions}\n    <div className=\"pagination_controls\" style={{ marginTop: \"20px\" }}>\n    <button\n      onClick={handlePreviousPage}\n      disabled={currentPage === 1}\n      style = {{width:\"4rem\"}}>\n      &larr;\n    </button>\n    <span>\n      Page {currentPage} of{\" \"}\n      {Math.ceil(filteredTransactions.length / itemsPerPage)}\n    </span>\n    <button\n      onClick={handleNextPage}\n      disabled={currentPage * itemsPerPage >=  filteredTransactions.length}\n      style = {{width:\"4rem\"}}>\n      &rarr;\n    </button>\n  </div></div>\n  )\n}\n\n  \n     \n\n\nexport default TransactionIndexModule"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}