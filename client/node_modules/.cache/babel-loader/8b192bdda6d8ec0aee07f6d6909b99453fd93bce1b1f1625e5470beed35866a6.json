{"ast":null,"code":"import React,{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";function EditableText(_ref){let{initialText,transactionId,keyName,API_URL}=_ref;const[isEditing,setIsEditing]=useState(false);// Track if editing mode is active\nconst[text,setText]=useState(initialText);// Store the text value\nconst handleTextClick=()=>{setIsEditing(true);// Switch to editing mode\n};const handleInputChange=e=>{setText(e.target.value);// Update the text state as the user types\n};const handleInputBlur=async()=>{setIsEditing(false);// Exit editing mode when the input loses focus\nawait saveTextToDatabase();};const handleKeyPress=async e=>{if(e.key===\"Enter\"){setIsEditing(false);// Exit editing mode when Enter is pressed\nawait saveTextToDatabase();}};const saveTextToDatabase=async()=>{await fetch(\"\".concat(API_URL,\"/api/transaction/\").concat(transactionId),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({[keyName]:text})}).then(r=>{if(!r.ok){r.json().then(data=>{console.log(data.error);return data.error;});}else{r.json().then(data=>{console.log(\"Changes saved:\",data);return data;});}});};return/*#__PURE__*/_jsx(\"div\",{children:isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:text,onChange:handleInputChange,onBlur:handleInputBlur,onKeyPress:handleKeyPress,autoFocus:true}):/*#__PURE__*/_jsx(\"span\",{onClick:handleTextClick,style:{cursor:\"pointer\"},children:text})});}export default EditableText;","map":{"version":3,"names":["React","useState","jsx","_jsx","EditableText","_ref","initialText","transactionId","keyName","API_URL","isEditing","setIsEditing","text","setText","handleTextClick","handleInputChange","e","target","value","handleInputBlur","saveTextToDatabase","handleKeyPress","key","fetch","concat","method","headers","body","JSON","stringify","then","r","ok","json","data","console","log","error","children","type","onChange","onBlur","onKeyPress","autoFocus","onClick","style","cursor"],"sources":["/home/jacob/development/code/phase-5/p5-project/client/src/Components/EditableText.js"],"sourcesContent":["import React, { useState } from \"react\";\n\nfunction EditableText({ initialText, transactionId, keyName, API_URL}) {\n    const [isEditing, setIsEditing] = useState(false); // Track if editing mode is active\n    const [text, setText] = useState(initialText); // Store the text value\n\n  const handleTextClick = () => {\n    setIsEditing(true); // Switch to editing mode\n  };\n\n  const handleInputChange = (e) => {\n    setText(e.target.value); // Update the text state as the user types\n  };\n\n  const handleInputBlur = async () => {\n    setIsEditing(false); // Exit editing mode when the input loses focus\n    await saveTextToDatabase();\n  };\n\n  const handleKeyPress = async (e) => {\n    if (e.key === \"Enter\") {\n      setIsEditing(false); // Exit editing mode when Enter is pressed\n      await saveTextToDatabase();\n    }\n  };\n\n  const saveTextToDatabase = async () => {\n      await fetch(`${API_URL}/api/transaction/${transactionId}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ [keyName]: text }),\n      })\n      .then((r) => {\n      if (!r.ok) {\n        r.json()\n        .then((data)=>{\n          console.log(data.error)\n          return data.error\n        })\n        \n      }\n\n      else{\n        r.json()\n        .then((data)=>{\n          console.log(\"Changes saved:\", data);\n        return data\n      })\n      }\n    \n    })\n      \n  };\n\n  return (\n    <div>\n      {isEditing ? (\n        <input\n          type=\"text\"\n          value={text}\n          onChange={handleInputChange}\n          onBlur={handleInputBlur}\n          onKeyPress={handleKeyPress}\n          autoFocus\n        />\n      ) : (\n        <span onClick={handleTextClick} style={{ cursor: \"pointer\" }}>\n          {text}\n        </span>\n      )}\n    </div>\n  );\n}\n\nexport default EditableText;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAExC,QAAS,CAAAC,YAAYA,CAAAC,IAAA,CAAkD,IAAjD,CAAEC,WAAW,CAAEC,aAAa,CAAEC,OAAO,CAAEC,OAAO,CAAC,CAAAJ,IAAA,CACjE,KAAM,CAACK,SAAS,CAAEC,YAAY,CAAC,CAAGV,QAAQ,CAAC,KAAK,CAAC,CAAE;AACnD,KAAM,CAACW,IAAI,CAAEC,OAAO,CAAC,CAAGZ,QAAQ,CAACK,WAAW,CAAC,CAAE;AAEjD,KAAM,CAAAQ,eAAe,CAAGA,CAAA,GAAM,CAC5BH,YAAY,CAAC,IAAI,CAAC,CAAE;AACtB,CAAC,CAED,KAAM,CAAAI,iBAAiB,CAAIC,CAAC,EAAK,CAC/BH,OAAO,CAACG,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAE;AAC3B,CAAC,CAED,KAAM,CAAAC,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClCR,YAAY,CAAC,KAAK,CAAC,CAAE;AACrB,KAAM,CAAAS,kBAAkB,CAAC,CAAC,CAC5B,CAAC,CAED,KAAM,CAAAC,cAAc,CAAG,KAAO,CAAAL,CAAC,EAAK,CAClC,GAAIA,CAAC,CAACM,GAAG,GAAK,OAAO,CAAE,CACrBX,YAAY,CAAC,KAAK,CAAC,CAAE;AACrB,KAAM,CAAAS,kBAAkB,CAAC,CAAC,CAC5B,CACF,CAAC,CAED,KAAM,CAAAA,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACnC,KAAM,CAAAG,KAAK,IAAAC,MAAA,CAAIf,OAAO,sBAAAe,MAAA,CAAoBjB,aAAa,EAAI,CACzDkB,MAAM,CAAE,OAAO,CACfC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAE,CAACrB,OAAO,EAAGI,IAAK,CAAC,CAC1C,CAAC,CAAC,CACDkB,IAAI,CAAEC,CAAC,EAAK,CACb,GAAI,CAACA,CAAC,CAACC,EAAE,CAAE,CACTD,CAAC,CAACE,IAAI,CAAC,CAAC,CACPH,IAAI,CAAEI,IAAI,EAAG,CACZC,OAAO,CAACC,GAAG,CAACF,IAAI,CAACG,KAAK,CAAC,CACvB,MAAO,CAAAH,IAAI,CAACG,KAAK,CACnB,CAAC,CAAC,CAEJ,CAAC,IAEG,CACFN,CAAC,CAACE,IAAI,CAAC,CAAC,CACPH,IAAI,CAAEI,IAAI,EAAG,CACZC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEF,IAAI,CAAC,CACrC,MAAO,CAAAA,IAAI,CACb,CAAC,CAAC,CACF,CAEF,CAAC,CAAC,CAEJ,CAAC,CAED,mBACE/B,IAAA,QAAAmC,QAAA,CACG5B,SAAS,cACRP,IAAA,UACEoC,IAAI,CAAC,MAAM,CACXrB,KAAK,CAAEN,IAAK,CACZ4B,QAAQ,CAAEzB,iBAAkB,CAC5B0B,MAAM,CAAEtB,eAAgB,CACxBuB,UAAU,CAAErB,cAAe,CAC3BsB,SAAS,MACV,CAAC,cAEFxC,IAAA,SAAMyC,OAAO,CAAE9B,eAAgB,CAAC+B,KAAK,CAAE,CAAEC,MAAM,CAAE,SAAU,CAAE,CAAAR,QAAA,CAC1D1B,IAAI,CACD,CACP,CACE,CAAC,CAEV,CAEA,cAAe,CAAAR,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}